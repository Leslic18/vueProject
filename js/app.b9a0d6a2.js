(function(){"use strict";var e={2173:function(e,t,r){var o=r(5130),a=r(6768);function n(e,t){const r=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(r)}var s=r(1241);const i={},u=(0,s.A)(i,[["render",n]]);var l=u,d=r(1387),c=(r(4114),r(144)),m=r(782);const f={class:"login-container"};var v={__name:"LoginView",setup(e){const t=(0,m.Pj)(),r=(0,d.rd)(),n=(0,c.Kh)({username:"",password:""}),s=()=>{t.dispatch("login",{username:n.username}),r.push({name:"dashboard"})};return(e,t)=>{const r=(0,a.g2)("a-input"),i=(0,a.g2)("a-form-item"),u=(0,a.g2)("a-input-password"),l=(0,a.g2)("a-button"),d=(0,a.g2)("a-form"),c=(0,a.g2)("a-card");return(0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(c,{title:"Login",class:"login-card"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{model:n,layout:"vertical",onFinish:s,onSubmit:t[2]||(t[2]=(0,o.D$)(()=>{},["prevent"]))},{default:(0,a.k6)(()=>[(0,a.bF)(i,{label:"Username",name:"username",rules:[{required:!0,message:"请输入用户名"}]},{default:(0,a.k6)(()=>[(0,a.bF)(r,{value:n.username,"onUpdate:value":t[0]||(t[0]=e=>n.username=e),placeholder:"username (admin or others)"},null,8,["value"])]),_:1}),(0,a.bF)(i,{label:"Password",name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:(0,a.k6)(()=>[(0,a.bF)(u,{value:n.password,"onUpdate:value":t[1]||(t[1]=e=>n.password=e),placeholder:"password"},null,8,["value"])]),_:1}),(0,a.bF)(i,null,{default:(0,a.k6)(()=>[(0,a.bF)(l,{type:"primary","html-type":"submit",block:""},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.eW)("Login",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["model"])]),_:1})])}}};const p=(0,s.A)(v,[["__scopeId","data-v-4c1bd012"]]);var g=p,b=r(4232),h=r(9041);const k={class:"page"},y={class:"header"},_={class:"actions"};var w={__name:"DashboardView",setup(e){const t=(0,m.Pj)(),r=(0,d.rd)(),o=(0,a.EW)(()=>t.getters.isAdmin),n=(0,a.EW)(()=>t.getters.workOrders),s=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"Project",dataIndex:"project",key:"project"},{title:"Overtime",dataIndex:"overtime",key:"overtime",width:100},{title:"Hours",dataIndex:"hours",key:"hours",width:100},{title:"Created At",dataIndex:"created_at",key:"created_at",width:160},{title:"Actions",key:"actions",width:100}],i=(0,c.KR)(null);let u=null;const l=()=>{const e=t.getters.hoursByProject,r=Object.keys(e),o=Object.values(e);!u&&i.value&&(u=h.Ts(i.value)),u&&(u.setOption({title:{text:"Project Hours Distribution"},tooltip:{},xAxis:{type:"category",data:r,axisLabel:{rotate:20,overflow:"break",interval:0}},yAxis:{type:"value"},series:[{type:"bar",data:o,itemStyle:{color:"#1890ff"}}],grid:{left:40,right:20,top:50,bottom:60}}),u.resize())},f=e=>{o.value&&t.commit("deleteWorkOrder",e)},v=()=>{t.commit("logout"),r.push({name:"login"})};return(0,a.sV)(()=>{l(),window.addEventListener("resize",l)}),(0,a.xo)(()=>{window.removeEventListener("resize",l),u&&u.dispose()}),(0,a.wB)(()=>t.getters.hoursByProject,()=>{l()},{deep:!0}),(e,t)=>{const r=(0,a.g2)("a-tag"),u=(0,a.g2)("a-button"),l=(0,a.g2)("a-popconfirm"),d=(0,a.g2)("a-table"),c=(0,a.g2)("a-col"),m=(0,a.g2)("a-row"),p=(0,a.g2)("a-card");return(0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",y,[t[1]||(t[1]=(0,a.Lk)("div",{class:"title"},"Tasks",-1)),(0,a.Lk)("div",_,[(0,a.bF)(r,{color:"blue"},{default:(0,a.k6)(()=>[(0,a.eW)("Role: "+(0,b.v_)(o.value?"admin":"user"),1)]),_:1}),(0,a.bF)(u,{onClick:v,size:"small"},{default:(0,a.k6)(()=>t[0]||(t[0]=[(0,a.eW)("Logout",-1)])),_:1,__:[0]})])]),(0,a.bF)(p,{class:"main-card"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{gutter:16},{default:(0,a.k6)(()=>[(0,a.bF)(c,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(d,{columns:s,"data-source":n.value,pagination:!1,"row-key":"id"},{bodyCell:(0,a.k6)(({column:e,record:n})=>["overtime"===e.key?((0,a.uX)(),(0,a.Wv)(r,{key:0,color:n.overtime?"red":"green"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)(n.overtime?"Yes":"No"),1)]),_:2},1032,["color"])):"actions"===e.key?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[o.value?((0,a.uX)(),(0,a.Wv)(l,{key:0,title:"Delete this work order?","ok-text":"Yes","cancel-text":"No",onConfirm:()=>f(n.id)},{default:(0,a.k6)(()=>[(0,a.bF)(u,{type:"primary",size:"small",danger:""},{default:(0,a.k6)(()=>t[2]||(t[2]=[(0,a.eW)("Delete",-1)])),_:1,__:[2]})]),_:2},1032,["onConfirm"])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)("-")],64))],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.eW)((0,b.v_)(n[e.dataIndex]),1)],64))]),_:1},8,["data-source"])]),_:1}),(0,a.bF)(c,{span:12},{default:(0,a.k6)(()=>[(0,a.Lk)("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1})]),_:1})]),_:1})])}}};const j=(0,s.A)(w,[["__scopeId","data-v-5e0cecca"]]);var O=j,F=(r(8111),r(2489),r(7588),(0,m.y$)({state:{user:{username:"",role:""},workOrders:[{id:"001",project:"Road Project A",overtime:!0,hours:3.5,created_at:"2024-04-10 10:30"},{id:"002",project:"Bridge Maintenance B",overtime:!1,hours:2,created_at:"2024-04-09 13:00"},{id:"003",project:"Pipeline Fix C",overtime:!0,hours:4.5,created_at:"2024-04-08 08:00"},{id:"004",project:"Bridge Maintenance B",overtime:!0,hours:3,created_at:"2024-04-07 16:45"},{id:"005",project:"Tunnel Cleaning D",overtime:!1,hours:8.1,created_at:"2024-04-03 11:43"}]},getters:{isLoggedIn(e){return!!e.user&&!!e.user.role},isAdmin(e){return"admin"===e.user.role},workOrders(e){return e.workOrders},hoursByProject(e){const t={};return e.workOrders.forEach(e=>{const r=e.project;t[r]||(t[r]=0),t[r]+=Number(e.hours)||0}),t}},mutations:{setUser(e,t){e.user.username=t.username,e.user.role=t.role},logout(e){e.user.username="",e.user.role=""},deleteWorkOrder(e,t){e.workOrders=e.workOrders.filter(e=>e.id!==t)}},actions:{login({commit:e},{username:t}){const r="admin"===t?"admin":"user";e("setUser",{username:t,role:r})}}}));const x=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:g},{path:"/dashboard",name:"dashboard",component:O,meta:{requiresAuth:!0}}],C=(0,d.aE)({history:(0,d.Bt)(),routes:x});C.beforeEach((e,t,r)=>{!e.meta.requiresAuth||F.getters.isLoggedIn?r():r({name:"login"})});var E=C,P=r(8330);r(4529);(0,o.Ef)(l).use(F).use(E).use(P.Ay).mount("#app")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,o,a,n){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],n=e[d][2];for(var i=!0,u=0;u<o.length;u++)(!1&n||s>=n)&&Object.keys(r.O).every(function(e){return r.O[e](o[u])})?o.splice(u--,1):(i=!1,n<s&&(s=n));if(i){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[o,a,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,s=o[0],i=o[1],u=o[2],l=0;if(s.some(function(t){return 0!==e[t]})){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(u)var d=u(r)}for(t&&t(o);l<s.length;l++)n=s[l],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},o=self["webpackChunkvue01"]=self["webpackChunkvue01"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],function(){return r(2173)});o=r.O(o)})();
//# sourceMappingURL=app.b9a0d6a2.js.map