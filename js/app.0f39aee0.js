(function(){"use strict";var e={5602:function(e,t,r){var o=r(5130),n=r(6768);function a(e,t){const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(r)}var i=r(1241);const s={},u=(0,i.A)(s,[["render",a]]);var d=u,l=r(1387);const c={class:"login-container"};function m(e,t,r,o,a,i){const s=(0,n.g2)("a-input"),u=(0,n.g2)("a-form-item"),d=(0,n.g2)("a-input-password"),l=(0,n.g2)("a-button"),m=(0,n.g2)("a-form"),f=(0,n.g2)("a-card");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(f,{title:"Login",class:"login-card"},{default:(0,n.k6)(()=>[(0,n.bF)(m,{layout:"vertical",onFinish:o.onFinish},{default:(0,n.k6)(()=>[(0,n.bF)(u,{label:"Username",name:"username",rules:[{required:!0,message:"Please input username"}]},{default:(0,n.k6)(()=>[(0,n.bF)(s,{value:o.formState.username,"onUpdate:value":t[0]||(t[0]=e=>o.formState.username=e),placeholder:"Enter username (admin for admin role)"},null,8,["value"])]),_:1}),(0,n.bF)(u,{label:"Password",name:"password",rules:[{required:!0,message:"Please input password"}]},{default:(0,n.k6)(()=>[(0,n.bF)(d,{value:o.formState.password,"onUpdate:value":t[1]||(t[1]=e=>o.formState.password=e),placeholder:"Any password"},null,8,["value"])]),_:1}),(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(l,{type:"primary","html-type":"submit",block:""},{default:(0,n.k6)(()=>t[2]||(t[2]=[(0,n.eW)("Login",-1)])),_:1,__:[2]})]),_:1})]),_:1},8,["onFinish"])]),_:1})])}r(4114);var f=r(144),p=r(782),v={setup(){const e=(0,p.Pj)(),t=(0,l.rd)(),r=(0,f.Kh)({username:"",password:""}),o=()=>{e.dispatch("login",{username:r.username}),t.push({name:"dashboard"})};return{formState:r,onFinish:o}}};const g=(0,i.A)(v,[["render",m],["__scopeId","data-v-d66258ec"]]);var h=g,k=r(4232);const b={class:"page"},y={class:"header"},_={class:"actions"},w={ref:"chartRef",class:"chart"};function O(e,t,r,o,a,i){const s=(0,n.g2)("a-tag"),u=(0,n.g2)("a-button"),d=(0,n.g2)("a-popconfirm"),l=(0,n.g2)("a-table"),c=(0,n.g2)("a-card"),m=(0,n.g2)("a-col"),f=(0,n.g2)("a-row");return(0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",y,[t[1]||(t[1]=(0,n.Lk)("div",{class:"title"},"Work Orders",-1)),(0,n.Lk)("div",_,[(0,n.bF)(s,{color:"blue"},{default:(0,n.k6)(()=>[(0,n.eW)("Role: "+(0,k.v_)(o.isAdmin?"admin":"user"),1)]),_:1}),(0,n.bF)(u,{onClick:o.onLogout,size:"small"},{default:(0,n.k6)(()=>t[0]||(t[0]=[(0,n.eW)("Logout",-1)])),_:1,__:[0]},8,["onClick"])])]),(0,n.bF)(f,{gutter:16},{default:(0,n.k6)(()=>[(0,n.bF)(m,{span:14},{default:(0,n.k6)(()=>[(0,n.bF)(c,{title:"Work Orders List"},{default:(0,n.k6)(()=>[(0,n.bF)(l,{columns:o.columns,"data-source":o.dataSource,pagination:!1,"row-key":"id"},{bodyCell:(0,n.k6)(({column:e,record:r})=>["overtime"===e.key?((0,n.uX)(),(0,n.Wv)(s,{key:0,color:r.overtime?"red":"green"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(r.overtime?"Yes":"No"),1)]),_:2},1032,["color"])):"actions"===e.key?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[o.isAdmin?((0,n.uX)(),(0,n.Wv)(d,{key:0,title:"Delete this work order?","ok-text":"Yes","cancel-text":"No",onConfirm:()=>o.onDelete(r.id)},{default:(0,n.k6)(()=>[(0,n.bF)(u,{type:"link",danger:""},{default:(0,n.k6)(()=>t[2]||(t[2]=[(0,n.eW)("Delete",-1)])),_:1,__:[2]})]),_:2},1032,["onConfirm"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)("-")],64))],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.eW)((0,k.v_)(r[e.dataIndex]),1)],64))]),_:1},8,["columns","data-source"])]),_:1})]),_:1}),(0,n.bF)(m,{span:10},{default:(0,n.k6)(()=>[(0,n.bF)(c,{title:"Project Hours Distribution"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",w,null,512)]),_:1})]),_:1})]),_:1})])}var j=r(9041),F={setup(){const e=(0,p.Pj)(),t=(0,n.EW)(()=>e.getters.isAdmin),r=(0,n.EW)(()=>e.getters.workOrders),o=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"Project",dataIndex:"project",key:"project"},{title:"Overtime",dataIndex:"overtime",key:"overtime",width:100},{title:"Hours",dataIndex:"hours",key:"hours",width:100},{title:"Created At",dataIndex:"created_at",key:"created_at",width:160},{title:"Actions",key:"actions",width:100}],a=(0,f.KR)(null);let i=null;const s=()=>{const t=e.getters.hoursByProject,r=Object.keys(t),o=Object.values(t);!i&&a.value&&(i=j.Ts(a.value)),i&&(i.setOption({title:{text:"Project Hours Distribution"},tooltip:{},xAxis:{type:"category",data:r},yAxis:{type:"value"},series:[{type:"bar",data:o,itemStyle:{color:"#1890ff"}}],grid:{left:40,right:20,top:50,bottom:40}}),i.resize())},u=r=>{t.value&&e.commit("deleteWorkOrder",r)},d=()=>{e.commit("logout"),window.location.hash="#/login"};return(0,n.sV)(()=>{s(),window.addEventListener("resize",s)}),(0,n.xo)(()=>{window.removeEventListener("resize",s),i&&i.dispose()}),(0,n.wB)(()=>e.getters.hoursByProject,()=>{s()},{deep:!0}),{columns:o,dataSource:r,onDelete:u,isAdmin:t,onLogout:d,chartRef:a}}};const x=(0,i.A)(F,[["render",O],["__scopeId","data-v-2ac23e78"]]);var A=x,P=(r(8111),r(2489),r(7588),(0,p.y$)({state:{user:{username:"",role:""},workOrders:[{id:"001",project:"Road Project A",overtime:!0,hours:3.5,created_at:"2024-04-10 10:30"},{id:"002",project:"Bridge Maintenance B",overtime:!1,hours:2,created_at:"2024-04-09 13:00"},{id:"003",project:"Pipeline Fix C",overtime:!0,hours:4.5,created_at:"2024-04-08 08:00"},{id:"004",project:"Bridge Maintenance B",overtime:!0,hours:3,created_at:"2024-04-07 16:45"},{id:"005",project:"Tunnel Cleaning D",overtime:!1,hours:8.1,created_at:"2024-04-03 11:43"}]},getters:{isLoggedIn(e){return!!e.user&&!!e.user.role},isAdmin(e){return"admin"===e.user.role},workOrders(e){return e.workOrders},hoursByProject(e){const t={};return e.workOrders.forEach(e=>{const r=e.project;t[r]||(t[r]=0),t[r]+=Number(e.hours)||0}),t}},mutations:{setUser(e,t){e.user.username=t.username,e.user.role=t.role},logout(e){e.user.username="",e.user.role=""},deleteWorkOrder(e,t){e.workOrders=e.workOrders.filter(e=>e.id!==t)}},actions:{login({commit:e},{username:t}){const r="admin"===t?"admin":"user";e("setUser",{username:t,role:r})}},modules:{}}));const W=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:h},{path:"/dashboard",name:"dashboard",component:A,meta:{requiresAuth:!0}}],C=(0,l.aE)({history:(0,l.Bt)(),routes:W});C.beforeEach((e,t,r)=>{!e.meta.requiresAuth||P.getters.isLoggedIn?r():r({name:"login"})});var E=C,L=r(8330);r(4529);(0,o.Ef)(d).use(P).use(E).use(L.Ay).mount("#app")}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,a){if(!o){var i=1/0;for(l=0;l<e.length;l++){o=e[l][0],n=e[l][1],a=e[l][2];for(var s=!0,u=0;u<o.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every(function(e){return r.O[e](o[u])})?o.splice(u--,1):(s=!1,a<i&&(i=a));if(s){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[o,n,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,i=o[0],s=o[1],u=o[2],d=0;if(i.some(function(t){return 0!==e[t]})){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(u)var l=u(r)}for(t&&t(o);d<i.length;d++)a=i[d],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(l)},o=self["webpackChunkvue01"]=self["webpackChunkvue01"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],function(){return r(5602)});o=r.O(o)})();
//# sourceMappingURL=app.0f39aee0.js.map